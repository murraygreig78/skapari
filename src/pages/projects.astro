---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import ProjectGrid from '../components/ProjectGrid.svelte';
import projectsData from '../projects.json';

// Extract unique categories from projects
const categories = [];
const categoryMap = new Map();

projectsData.forEach(project => {
  if (project.category && !categoryMap.has(project.category.toLowerCase())) {
    categoryMap.set(project.category.toLowerCase(), {
      id: project.category.toLowerCase(),
      label: project.category
    });
  }
});

categories.push(...categoryMap.values());
---

<Layout title="Projects - Skapari">
  <div class="wrapper">
    <header class="header">
      <Nav />
    </header>
    
    <section class="section" id="projects">
      <div class="container-fluid">
        <div class="overlay-content">
          <h1 class="text-right main-heading">projects</h1>
        </div>
      </div>
    </section>

    <ProjectGrid client:load projects={projectsData} categories={categories} />
  </div>
  <Footer />
</Layout>

<style>
  /* Add any page-specific styles here */
</style> 